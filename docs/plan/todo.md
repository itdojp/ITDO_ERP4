# TODO リスト（短期ドライブ用）

## 11/21 週（～12/10ステージングまでに着手）
- [ ] Prisma/SQL 詳細化（enum/型/FK/削除ポリシー）とスキーマPR作成（#5）
- [ ] 発番/定期案件/アラート計算のバッチ擬似コード・シーケンスを追加（#6, batch-jobs.md）
- [ ] バックエンドPoCスケルトン（APIサーバ: プロジェクト/見積/請求/タイムシート/経費登録と発番・承認フック）
- [ ] フロントPoCスケルトン（Web: 日報入力、工数入力、請求ドラフト閲覧）
- [ ] データ移行マッピング初版（PO im_*/acs_* → 新スキーマ、キー/シーケンス整合）
- [ ] CI足場（lint/format/docリンクチェック）とテンプレート（Issue/PR）
- [ ] バックエンド: 番号採番サービス（number_sequencesラッパ）とメール送信Stubをユーティリティ化
- [ ] バックエンド: 承認ルールマッチャー（条件→ステップ生成）の雛形実装
- [ ] バックエンド: ダッシュボード用アラートフィードAPI（メール送信Stubと同時に発報履歴保存）
- [ ] フロント: 認証モック（Google OIDC想定のセッション+BFFダミー）
- [ ] フロント: ダッシュボードでアラート表示（初期はダミーデータorAPI連携）
- [ ] フロント: ウェルビーイング Not Good 時のタグ/短文と「ヘルプ/相談」モーダル導線実装（相談先候補・緊急案内表示）
- [ ] 移行: 旧ID→新UUIDマッピングテーブル設計とサンプルスクリプト
- [ ] 監査ログ設計: 主要操作（承認/発番/ウェルビーイング閲覧）のログ項目サマリ
- [ ] バックエンド: シンプルなバリデーション (zod / fastify schema) を主要エンドポイントに付与
- [ ] バックエンド: `/me` にロール/グループ等のモックデータを返す
- [ ] バックエンド: タイムシート修正時の承認ルール適用（変更時のみ approval 起動）
- [ ] バックエンド: 承認ステップの監査ログ（who/when/from/to/reason）保存
- [ ] バックエンド: 送信Stub（請求書メール/発注書メール）とPDF生成枠のダミー関数
- [ ] バックエンド: RBAC簡易チェック（role + projectId で閲覧をフィルタ）
- [ ] フロント: APIクライアントの共通ラッパ（fetch + エラーハンドリング）
- [ ] フロント: 請求ドラフト詳細画面モック（明細、承認状態、送信ボタン）
- [ ] フロント: 工数入力フォーム（プロジェクト/タスク/日付/時間/場所/残業区分）
- [ ] フロント: ヘルプモーダルの内容（相談先ラベル/説明/緊急案内）を表示
- [ ] テスト: バックエンド簡易ハッピーパス (contracts/invoices/time/expenses) のスモーク
- [ ] テスト: フロントの手動確認手順（ダッシュボード→日報→工数→請求送信Stub）
- [ ] CI: lint/format のジョブ追加 (GH Actions)、prisma format/validate を走らせる
- [ ] CI: Vite build テストのジョブ追加
- [ ] 移行: 抽出→変換→ロードのスクリプト雛形 (Python or SQL) を docs に追加
- [ ] 移行: 重複コード/欠損データの検出ルールと簡易レポート草案

## 12/1 週（ステージング前の仕上げ）
- [ ] 発番と承認の実装PoC（API + バッチジョブで連携）
- [ ] アラート発火の最小実装（予算+10%、残業、承認遅延のダッシュボード表示＋メール送信Stub）
- [ ] 定期案件テンプレ生成のジョブテスト（毎月/四半期）
- [ ] ウェルビーイング入力と人事閲覧のRBAC/監査ログ実装PoC
- [ ] レポート3種の算出ロジック（プロジェクト別工数/予実、グループ別工数、個人別残業）
- [ ] フロント: 日報/工数入力のUX改善とバリデーション（モバイル対応）
- [ ] フロント: 請求ドラフトの一覧/詳細で番号・ステータスを表示、送信Stub連携
- [ ] バックエンド: PDF生成Stub（請求書/発注書）とテンプレAPIの枠
- [ ] バックエンド: 休暇/経費/タイムシート修正承認の統一ハンドラ
- [ ] QA: 簡易E2Eまたは手順書（ハッピーパス）
- [ ] フロント: 人事向け匿名集計ビューの骨組み（5人未満非表示）※簡易でもよい
- [ ] バックエンド: metrics計算関数のスタブ（予算消化率、残業時間、承認遅延計測）
- [ ] バックエンド: AlertSettingのCRUDと有効/無効切替API
- [ ] バックエンド: ApprovalRule CRUDと条件/ステップ保存
- [ ] バックエンド: RateCard 適用ロジック（工数×単価計算の枠）
- [ ] フロント: アラート設定と承認ルールの簡易設定画面モック（保存は後続でも可）
- [ ] 移行: サンプルデータを使ったPoCロード＆整合チェック（工数件数、請求合計）
- [ ] CI: prettier/eslint 設定と整合性チェック
- [ ] セキュリティ: CORS/ヘッダ/基本的な入力サイズ制限設定

## 12/10 以降（MVP後続拡張）
- [ ] 承認期限エスカレーション、Slack/Webhook外部通知
- [ ] 経費UI高度化（領収書アップロード/リマインダ）
- [ ] グループチャット（プロジェクト紐付け、タグ、絵文字）
- [ ] スマホネイティブアプリ検討（Web API/BFF再利用）
- [ ] レポート拡充（カスタムレイアウト、CSV/PDFエクスポートの柔軟化）
- [ ] データ品質チェックバッチ（コード重複、参照切れ、税率不整合）
- [ ] 認証/IDaaS連携強化（Google/AD連携、SCIMなど）
- [ ] PDF/メール本実装（テンプレ管理、署名/ロゴ、送信結果トラッキング）
- [ ] アラートのリマインド/サプレッション設定
- [ ] 承認期限エスカレーション設定UIとバッチ
- [ ] ウェルビーイング匿名集計の高度化（時系列/部門比較、フィルタ、閾値設定）
- [ ] モバイル/ネイティブApp対応（オフライン入力、Push通知）
- [ ] 見積/請求テンプレ管理UI（番号ルール、フォーマット、署名挿入）
- [ ] テーブル設計の正規化/性能チューニング（大規模データに向けた再設計）
