# 依存脆弱性トリアージ運用

## 目的
- `npm audit` 検知を「修正するか/期限付きで受容するか」で一貫して判断する
- 受容時も、理由・期限・承認・追跡Issueを必須化して放置を防ぐ

## 対象
- backend / frontend の npm 依存（直接・間接）
- 監査ソース:
  - CI: `.github/workflows/ci.yml` `security-audit` job
  - ローカル: `npm audit --prefix packages/<target> --audit-level=moderate`

## 基本ルール
- `critical` / `high`:
  - 原則: 修正完了までマージしない
  - 例外: 期限付き受容をIssue化し、承認者を明記する
- `moderate`:
  - 5営業日以内に triage（runtime/dev-only/到達可能性）を実施
  - 修正可能なら修正、難しい場合は期限付き受容でIssue管理
- `low` / `info`:
  - 定期棚卸し時にまとめて評価（四半期目安）

## 受容（risk acceptance）に必須の記録
- 該当パッケージ・アドバイザリ・影響範囲
- runtime 到達性（攻撃成立条件）
- 代替コントロール（設定・権限制限・監視）
- 受容期限（具体日付）と再評価条件
- 担当者と承認者
- 追跡Issue（close条件を明記）

## 定期運用
- 週次: `security-audit` 結果を確認し新規検知を triage
- 四半期: 受容中項目の期限・実効性を再評価

## 台帳
- 最新の棚卸しは `docs/security/dependency-vulnerability-register.md` を参照
