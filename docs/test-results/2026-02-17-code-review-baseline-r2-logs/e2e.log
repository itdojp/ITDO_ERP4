./scripts/e2e-frontend.sh
Port 55433 is unavailable; falling back to 55438
postgres ready: erp4-pg-e2e
[dotenv@17.2.4] injecting env (0) from packages/backend/.env -- tip: ğŸ” encrypt with Dotenvx: https://dotenvx.com
Loaded Prisma config from packages/backend/prisma.config.ts.

Prisma schema loaded from packages/backend/prisma/schema.prisma.
Datasource "db": PostgreSQL database "postgres", schema "public" at "localhost:5432"

ğŸš€  Your database is now in sync with your Prisma schema. Done in 3.00s

npm notice
npm notice New major version of npm available! 10.8.2 -> 11.10.0
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.10.0
npm notice To update run: npm install -g npm@11.10.0
npm notice
postgres ready: erp4-pg-e2e
INSERT 0 2
INSERT 0 1
INSERT 0 1
INSERT 0 2
INSERT 0 7
INSERT 0 1
INSERT 0 1
INSERT 0 1
INSERT 0 1
INSERT 0 1
INSERT 0 1
INSERT 0 1
INSERT 0 1

> erp4-backend-poc@0.1.0 prisma:generate
> prisma generate

[dotenv@17.2.4] injecting env (0) from .env -- tip: ğŸ”„ add secrets lifecycle management: https://dotenvx.com/ops
Loaded Prisma config from prisma.config.ts.

Prisma schema loaded from prisma/schema.prisma.

âœ” Generated Prisma Client (v7.3.0) to ./node_modules/@prisma/client in 471ms

Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)



> erp4-backend-poc@0.1.0 build
> tsc -p tsconfig.json

backend ready
frontend ready

Running 61 tests using 1 worker

(node:1788308) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:1788308) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
  âœ“   1 packages/frontend/e2e/backend-action-policy-ack-guard.spec.ts:115:1 â€º action policy chat_ack_completed: incomplete ack requires override reason @core (495ms)
  âœ“   2 packages/frontend/e2e/backend-action-policy-ack-guard.spec.ts:199:1 â€º action policy chat_ack_completed: ackå®Œäº†ã¯ç†ç”±ä¸è¦ã€æœªå®Œäº†ã¯ç†ç”±ä»˜ãoverrideã§æ‰¿èªå¯èƒ½ @core (617ms)
  âœ“   3 packages/frontend/e2e/backend-delivery-due.spec.ts:20:1 â€º delivery due report @core (88ms)
  âœ“   4 packages/frontend/e2e/backend-evidence-pack.spec.ts:140:1 â€º evidence pack flow: snapshot/export/archive and audit log consistency @core (396ms)
  âœ“   5 packages/frontend/e2e/backend-evidence-pack.spec.ts:267:1 â€º evidence pack archive is restricted to admin/mgmt while export is readable for project user @core (135ms)
  âœ“   6 packages/frontend/e2e/backend-evidence-pack.spec.ts:297:1 â€º evidence snapshot regenerate requires reason and history keeps versions @core (209ms)
  âœ“   7 packages/frontend/e2e/backend-leave-time-conflict.spec.ts:27:1 â€º leave submit blocks when time entries exist @core (92ms)
  âœ“   8 packages/frontend/e2e/backend-manual-checklist.spec.ts:35:1 â€º backend manual checklist: documents & send logs @extended (133ms)
  âœ“   9 packages/frontend/e2e/backend-manual-checklist.spec.ts:110:1 â€º backend manual checklist: alerts/templates/reports jobs @extended (267ms)
  âœ“  10 packages/frontend/e2e/backend-manual-checklist.spec.ts:238:1 â€º backend manual checklist: members/vendors/time/expenses/wellbeing @extended (298ms)
  âœ“  11 packages/frontend/e2e/backend-milestone-sync.spec.ts:26:1 â€º milestone invoice sync @core (129ms)
  âœ“  12 packages/frontend/e2e/backend-notification-suppression.spec.ts:496:1 â€º chat_ack_required notifications: global mute and room mention settings suppress delivery @core (310ms)
  âœ“  13 packages/frontend/e2e/backend-notification-suppression.spec.ts:647:1 â€º chat_mention notifications: global mute and room mention settings suppress delivery @core (309ms)
  âœ“  14 packages/frontend/e2e/backend-notification-suppression.spec.ts:823:1 â€º chat_message notifications: notifyAllPosts and mute settings suppress delivery @core (282ms)
  âœ“  15 packages/frontend/e2e/backend-notification-suppression.spec.ts:972:1 â€º project_member_added notifications: global mute suppresses delivery @core (193ms)
  âœ“  16 packages/frontend/e2e/backend-notification-suppression.spec.ts:1040:1 â€º leave_upcoming notifications: global mute suppresses delivery @core (421ms)
  âœ“  17 packages/frontend/e2e/backend-notification-suppression.spec.ts:1188:1 â€º approval_pending notifications: global mute bypass delivers notification @core (134ms)
  âœ“  18 packages/frontend/e2e/backend-notification-suppression.spec.ts:1262:1 â€º daily_report_missing notifications: global mute bypass delivers notification @core (58ms)
  âœ“  19 packages/frontend/e2e/backend-notification-suppression.spec.ts:1307:1 â€º chat_room_acl_mismatch notifications: global mute bypass delivers notification @core (154ms)
  âœ“  20 packages/frontend/e2e/backend-notification-suppression.spec.ts:1374:1 â€º chat_ack_escalation notifications: global mute bypass delivers notification @core (297ms)
  âœ“  21 packages/frontend/e2e/backend-notification-suppression.spec.ts:1504:1 â€º approval_approved notifications: global mute bypass delivers notification @core (182ms)
  âœ“  22 packages/frontend/e2e/backend-notification-suppression.spec.ts:1586:1 â€º approval_rejected notifications: global mute bypass delivers notification @core (173ms)
  âœ“  23 packages/frontend/e2e/backend-project-access-guard.spec.ts:32:1 â€º project access guard: route/query/body projectId is enforced @core (79ms)
  âœ“  24 packages/frontend/e2e/backend-project-baselines.spec.ts:22:1 â€º project baseline can snapshot tasks @extended (60ms)
  âœ“  25 packages/frontend/e2e/backend-project-burndown.spec.ts:20:1 â€º project burndown returns daily remaining minutes @extended (50ms)
  âœ“  26 packages/frontend/e2e/backend-project-effort-variance.spec.ts:20:1 â€º project effort includes plan variance @core (37ms)
  âœ“  27 packages/frontend/e2e/backend-project-effort-variance.spec.ts:72:1 â€º project effort variance handles null planHours @core (23ms)
  âœ“  28 packages/frontend/e2e/backend-project-evm.spec.ts:22:1 â€º project evm returns daily pv/ev/ac/spi/cpi @extended (73ms)
  âœ“  29 packages/frontend/e2e/backend-project-parent.spec.ts:20:1 â€º project parent can be updated with reason @extended (59ms)
  âœ“  30 packages/frontend/e2e/backend-project-period.spec.ts:20:1 â€º project can set and clear period dates @extended (32ms)
  âœ“  31 packages/frontend/e2e/backend-rate-card-profit.spec.ts:20:1 â€º rate card affects profit report @core (57ms)
  âœ“  32 packages/frontend/e2e/backend-recurring-template.spec.ts:20:1 â€º recurring template generates draft invoice @core (81ms)
  âœ“  33 packages/frontend/e2e/backend-task-dependencies.spec.ts:22:1 â€º task dependencies can be set/cleared and prevents cycles @extended (89ms)
  âœ“  34 packages/frontend/e2e/backend-task-parent.spec.ts:22:1 â€º task parent can be updated and cleared @extended (92ms)
  âœ“  35 packages/frontend/e2e/backend-task-period.spec.ts:29:1 â€º task plan/actual dates can be set, cleared, validated @extended (51ms)
  âœ“  36 packages/frontend/e2e/backend-task-progress.spec.ts:22:1 â€º task progress percent can be set, cleared, validated @extended (41ms)
  âœ“  37 packages/frontend/e2e/backend-time-invoice.spec.ts:26:1 â€º time entries to invoice draft @core (108ms)
  âœ“  38 packages/frontend/e2e/backend-time-invoice.spec.ts:149:1 â€º invoice mark paid updates status and validates input @extended (63ms)
  âœ“  39 packages/frontend/e2e/backend-vendor-invoice-linking.spec.ts:96:1 â€º vendor invoice po linking: post-submit unlink requires reason @core (189ms)
  âœ“  40 packages/frontend/e2e/backend-vendor-invoice-linking.spec.ts:167:1 â€º vendor invoice po linking: link/unlink is forbidden for non-admin roles @core (70ms)
  âœ“  41 packages/frontend/e2e/frontend-offline.spec.ts:42:1 â€º frontend offline queue @extended (1.9s)
  âœ“  42 packages/frontend/e2e/frontend-pwa.spec.ts:145:1 â€º pwa offline duplicate time entries @pwa @extended (2.2s)
  -  43 packages/frontend/e2e/frontend-pwa.spec.ts:255:1 â€º pwa push subscribe flow @pwa
  âœ“  44 packages/frontend/e2e/frontend-pwa.spec.ts:304:1 â€º pwa service worker cache refresh @pwa @extended (1.3s)
  âœ“  45 packages/frontend/e2e/frontend-smoke.spec.ts:296:1 â€º frontend smoke core @core (7.2s)
  âœ“  46 packages/frontend/e2e/frontend-smoke.spec.ts:554:1 â€º frontend smoke invoice send and mark-paid lifecycle @extended (1.6s)
  âœ“  47 packages/frontend/e2e/frontend-smoke.spec.ts:629:1 â€º frontend smoke workflow evidence chat references @extended (2.9s)
  âœ“  48 packages/frontend/e2e/frontend-smoke.spec.ts:825:1 â€º frontend smoke approval ack link lifecycle @extended (1.6s)
[e2e][console.error] Failed to load resource: the server responded with a status of 400 (Bad Request)
  âœ“  49 packages/frontend/e2e/frontend-smoke.spec.ts:939:1 â€º frontend smoke approvals ack guard requires override reason @extended (1.6s)
  âœ“  50 packages/frontend/e2e/frontend-smoke.spec.ts:1115:1 â€º frontend smoke vendor approvals @extended (2.1s)
  âœ“  51 packages/frontend/e2e/frontend-smoke.spec.ts:1175:1 â€º frontend smoke vendor docs create @extended (4.0s)
  âœ“  52 packages/frontend/e2e/frontend-smoke.spec.ts:1374:1 â€º frontend smoke reports masters settings @extended (10.1s)
  âœ“  53 packages/frontend/e2e/frontend-smoke.spec.ts:1738:1 â€º frontend smoke current-user notification settings @extended (1.5s)
  âœ“  54 packages/frontend/e2e/frontend-smoke.spec.ts:1815:1 â€º frontend smoke chat hr analytics @extended (10.7s)
  âœ“  55 packages/frontend/e2e/frontend-smoke.spec.ts:2090:1 â€º frontend smoke room chat (private_group/dm) @extended (3.5s)
  âœ“  56 packages/frontend/e2e/frontend-smoke.spec.ts:2238:1 â€º frontend smoke room chat external summary @extended (2.4s)
  âœ“  57 packages/frontend/e2e/frontend-smoke.spec.ts:2310:1 â€º frontend smoke external chat invited rooms @extended (3.6s)
  âœ“  58 packages/frontend/e2e/frontend-smoke.spec.ts:2449:1 â€º frontend smoke additional sections @extended (2.3s)
  âœ“  59 packages/frontend/e2e/frontend-smoke.spec.ts:2532:1 â€º frontend smoke admin ops @extended (3.2s)
  âœ“  60 packages/frontend/e2e/frontend-task-time-entry.spec.ts:84:1 â€º task to time entry link @core (1.2s)
  âœ“  61 packages/frontend/e2e/frontend-ux-quality.spec.ts:41:1 â€º ux-quality baseline (labels/errors/keyboard) @core (1.3s)

  1 skipped
  60 passed (1.2m)
e2e evidence saved: /home/devuser/work/CodeX/ITDO_ERP4/docs/test-results/2026-02-17-frontend-e2e
