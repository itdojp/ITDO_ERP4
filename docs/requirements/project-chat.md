# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒ£ãƒƒãƒˆä»•æ§˜ï¼ˆçµ±åˆï¼‰

## ç›®çš„/ã‚¹ã‚³ãƒ¼ãƒ—
- ERPã¨çµ±åˆã•ã‚ŒãŸãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã¨ã—ã¦ã€Slack/Chatworkä»£æ›¿ã‚’ç›®æŒ‡ã™
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±/ã‚¿ã‚¹ã‚¯/æ‰¿èªãªã©ERPã®æƒ…å ±ã¨é€£å‹•ã—ãŸåˆ©ç”¨ã‚’æƒ³å®šã™ã‚‹
- AIã‚’å–ã‚Šè¾¼ã¿ã€è¦ç´„/ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡ºãªã©ã®æ”¯æ´ã‚’è¡Œã†ï¼ˆè©³ç´°ã¯æ±ºå®šå¾…ã¡ï¼‰

## ç¾çŠ¶ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå˜ä½ã®ç°¡æ˜“ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆ
- æŠ•ç¨¿/é–²è¦§/ã‚¿ã‚°/ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³/ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã®ã¿
- ç›£æŸ»/é€šçŸ¥/ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é…ä¿¡/æ·»ä»˜/æ¤œç´¢ã¯æœªå®Ÿè£…

## å½¹å‰²/ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- è¨±å¯ãƒ­ãƒ¼ãƒ«: admin / mgmt / user / hr / exec / external_chat
- admin/mgmt ã¯å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- ãã‚Œä»¥å¤–ã®ãƒ­ãƒ¼ãƒ«ã¯ `projectIds` ã«å«ã¾ã‚Œã‚‹æ¡ˆä»¶ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- `external_chat` ã¯ãƒãƒ£ãƒƒãƒˆã®ã¿åˆ©ç”¨å¯ï¼ˆä»–æ©Ÿèƒ½ã¯ä¸å¯ï¼‰
  - å‚åŠ å¯èƒ½ãªãƒ«ãƒ¼ãƒ ã¯ã€Œè¨±å¯ã•ã‚ŒãŸãƒ«ãƒ¼ãƒ ã€ã®ã¿ï¼ˆæ‹›å¾…/è¨±å¯åˆ¶ï¼‰
  - DM ã¯ç¦æ­¢

## æ±ºå®šäº‹é …ï¼ˆè¦‹ç›´ã—åæ˜ ï¼‰
- æ—¢èª­/æœªèª­çŠ¶æ…‹ã‚’ä¿æŒã™ã‚‹
- è‡ªåˆ†ã®æœªèª­ã¯è‡ªåˆ†ã®ã¿ãŒç¢ºèªã§ãã‚‹ï¼ˆæœªèª­ä»¶æ•°/æ–°ç€å¼·èª¿ãªã©ï¼‰
- è‡ªåˆ†ä»¥å¤–ã®æœªèª­/æ—¢èª­çŠ¶æ…‹ã¯è¡¨ç¤ºã—ãªã„ï¼ˆã„ã‚ã‚†ã‚‹æ—¢èª­è¡¨ç¤ºã¯ã—ãªã„ï¼‰
- ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã¯å¿…é ˆ
- ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³å¯¾è±¡ã¯è£œå®Œé¸æŠã§æŒ‡å®šã§ãã‚‹ï¼ˆãƒ¦ãƒ¼ã‚¶/ã‚°ãƒ«ãƒ¼ãƒ—/å…¨å“¡ï¼‰
  - å…¨å“¡å®›ï¼ˆ@allï¼‰ã¯æŠ•ç¨¿å‰ã®ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ + æŠ•ç¨¿å›æ•°åˆ¶é™ã‚’è¡Œã†
- æœ¬æ–‡ã¯Markdownã§è¨˜è¿°ã™ã‚‹
- é€šçŸ¥/æ·»ä»˜/æ¤œç´¢ã¯ERPçµ±åˆã¨ã—ã¦æœ›ã¾ã—ã„å½¢ã§è¨­è¨ˆã™ã‚‹ï¼ˆåŸå‰‡ã®ã¿æ±ºå®šã€‚è©³ç´°ãªæ–¹å¼ã¯ã€Œæœªæ±ºå®š/è¦è¨­è¨ˆã€ã‚’å‚ç…§ï¼‰
- ç›£æŸ»ç›®çš„ã® break-glassï¼ˆç›£æŸ»é–²è¦§ï¼‰ã‚’æä¾›ã™ã‚‹ï¼ˆç†ç”±å¿…é ˆ + ç›£æŸ»ãƒ­ã‚°å¿…é ˆ + äºŒé‡æ‰¿èªã‚’æƒ³å®šï¼‰
  - break-glass ã‚’ä½¿ã£ãŸäº‹å®ŸãŒåˆ†ã‹ã‚‹ä»•çµ„ã¿ã‚’å…¥ã‚Œã‚‹ï¼ˆãƒãƒŠãƒ¼/ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸/å±¥æ­´ï¼‰
- æŠ•ç¨¿å†…å®¹ã¯å®Œå…¨å‰Šé™¤ã§ããªã„ï¼ˆè«–ç†å‰Šé™¤ + ç›£æŸ»ä¿å…¨ã€‚å‰Šé™¤ã—ã¦ã‚‚ç›£æŸ»ä¸Šã¯è¿½è·¡å¯èƒ½ï¼‰
- å¤–éƒ¨é€£æºï¼ˆWebhook/å¤–éƒ¨é€šçŸ¥ãªã©ï¼‰ã¯å…¬å¼ãƒ«ãƒ¼ãƒ ã®ã¿è¨±å¯ã™ã‚‹

## æœªæ±ºå®š/è¦è¨­è¨ˆï¼ˆãƒ™ãƒ¼ã‚¹æ–¹é‡ï¼‰
### ãƒ™ãƒ¼ã‚¹ï¼ˆæ¡ˆï¼‰
- ãƒãƒ£ãƒƒãƒˆå˜ä½ã¯ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ/éƒ¨é–€/å…¨ç¤¾/DMã€ã‚’å«ã‚ã‚‹
  - DM ã¯ç®¡ç†è€…è¨­å®šã§ç„¡åŠ¹åŒ–ã§ãã‚‹
- è‡ªåˆ†ã®æœªèª­ã¯è‡ªåˆ†ã®ã¿ãŒå…¨ã¦ã‚ã‹ã‚‹ï¼ˆæœªèª­ä»¶æ•°/æœªèª­ãƒã‚¤ãƒ©ã‚¤ãƒˆï¼‰
  - è‡ªåˆ†ä»¥å¤–ã®æœªèª­/æ—¢èª­çŠ¶æ…‹ã¯è¡¨ç¤ºã—ãªã„
- æŒ‡å®šã—ãŸå¯¾è±¡è€…ã®ã€ŒOK/ç¢ºèªã€çŠ¶æ³ã‚’è¿½ãˆã‚‹ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆç‰¹åˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰ã‚’æä¾›ã™ã‚‹ï¼ˆæ–¹å¼ã¯è¦è¨­è¨ˆï¼‰
- ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã®ç¨®é¡: ãƒ¦ãƒ¼ã‚¶ / ã‚°ãƒ«ãƒ¼ãƒ— / å…¨å“¡ï¼ˆè£œå®Œé¸æŠã§æŒ‡å®šï¼‰
  - å…¨å“¡å®›ï¼ˆ@allï¼‰ã¯æŠ•ç¨¿å‰ç¢ºèª + æŠ•ç¨¿å›æ•°åˆ¶é™
- æ¤œç´¢ã®å¯¾è±¡ç¯„å›²ã¯è¨­å®šã§é¸æŠã§ãã‚‹
  - ãƒãƒ£ãƒƒãƒˆã®ã¿ / ERPæ¨ªæ–­
- é€šçŸ¥ãƒãƒ£ãƒãƒ«ï¼ˆã‚¢ãƒ—ãƒªå†…/ãƒ¡ãƒ¼ãƒ«/Push/å¤–éƒ¨é€£æºï¼‰ã¨é€šçŸ¥æ¡ä»¶ã¯è¨­å®šã§é¸æŠã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼ˆè©³ç´°æ¤œè¨ï¼‰
- AIæ©Ÿèƒ½ã®ç¯„å›²: è¦ç´„/ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡º/FAQ/æ¤œç´¢æ”¯æ´ï¼ˆè©³ç´°æ¤œè¨ï¼‰
- å¤–éƒ¨ãƒ¦ãƒ¼ã‚¶ï¼ˆexternal_chatï¼‰ã¯ã€Œè¨±å¯ã•ã‚ŒãŸãƒ«ãƒ¼ãƒ ã€ã®ã¿å‚åŠ å¯ã€DMã¯ç¦æ­¢

### è©³ç´°æ¤œè¨ï¼ˆè«–ç‚¹ï¼‰
- Markdownæ–¹è¨€ï¼ˆCommonMark/GFMãªã©ï¼‰ã¨ã‚µãƒ‹ã‚¿ã‚¤ã‚ºæ–¹é‡
- æ·»ä»˜ã®ä¿å­˜å…ˆ: Google Drive ã‚’å€™è£œã¨ã—ã¦æ¤œè¨ï¼ˆæ¨©é™åˆ¶å¾¡/å…±æœ‰ãƒ¢ãƒ‡ãƒ«/ç›£æŸ»/å®¹é‡/ã‚¦ã‚¤ãƒ«ã‚¹å¯¾ç­–ï¼‰
  - Googleå´ã®ã€Œã‚·ã‚¹ãƒ†ãƒ ãƒ¦ãƒ¼ã‚¶ã®ã¿ãŒèª­ã¿æ›¸ãã§ãã‚‹é ˜åŸŸã€ã‚’å°‚ç”¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹æ¡ˆï¼ˆDriveé€£æºæ¡ˆã«ç›¸å½“ï¼‰
  - ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †: `docs/requirements/chat-attachments-google-drive.md`
- ERPæ¨ªæ–­æ¤œç´¢ã®ç¯„å›²ã¨æ¨©é™åˆ¶å¾¡ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ–¹å¼
- é€šçŸ¥ã®æ—¢å®šå€¤ã€ãƒŸãƒ¥ãƒ¼ãƒˆ/é »åº¦åˆ¶å¾¡ã€å¤–éƒ¨é€£æºã®æ‰±ã„ï¼ˆå…¬å¼ãƒ«ãƒ¼ãƒ ã®ã¿ï¼‰
- AIã®å®Ÿè£…æ–¹å¼ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«/å¤–éƒ¨LLMï¼‰ã€æ¨©é™/ç›£æŸ»ï¼ˆå¤–éƒ¨LLMé€ä¿¡ã¯å¤–éƒ¨é€£æºæ‰±ã„ï¼‰

## ã‚¬ãƒãƒŠãƒ³ã‚¹è¨­è¨ˆï¼ˆæ¡ˆï¼‰
### ãƒ«ãƒ¼ãƒ ã®ç¨®åˆ¥
- å…¬å¼ãƒ«ãƒ¼ãƒ ï¼ˆä¼šç¤¾ãŒæŠŠæ¡ãƒ»çµ±åˆ¶ã™ã‚‹å‰æï¼‰
  - ä¾‹: æ¡ˆä»¶ãƒ«ãƒ¼ãƒ ï¼ˆProjectï¼‰ã€éƒ¨é–€/å…¨ç¤¾ãƒ«ãƒ¼ãƒ ï¼ˆGroup/Roleï¼‰
  - ä½œæˆ/ç®¡ç†: admin/mgmtï¼ˆæ¡ˆä»¶ãƒ«ãƒ¼ãƒ ã«ã¤ã„ã¦ã¯ project leader ã®é™å®šæ“ä½œã‚’å¾Œç¶šã§è¿½åŠ æ¤œè¨ï¼‰
  - å¤–éƒ¨é€£æºï¼ˆWebhook/å¤–éƒ¨é€šçŸ¥/å¤–éƒ¨ãƒ¦ãƒ¼ã‚¶æ‹›å¾…/å¤–éƒ¨LLMç­‰ï¼‰ã‚’è¨±å¯ã§ãã‚‹ã®ã¯å…¬å¼ãƒ«ãƒ¼ãƒ ã®ã¿
- ç§çš„ãƒ«ãƒ¼ãƒ ï¼ˆç¤¾å“¡ã®è‡ªæ²»ã‚’åŸºæœ¬ã¨ã™ã‚‹ãŒã€ä¼šç¤¾ãŒç›£æŸ»ã§ãã‚‹å‰æï¼‰
  - ä½œæˆ/ç®¡ç†: userï¼ˆå†…éƒ¨ãƒ¦ãƒ¼ã‚¶ï¼‰ã®ã¿ã€‚external_chat ã¯ä½œæˆä¸å¯
  - ãƒ«ãƒ¼ãƒ ç®¡ç†è€…ï¼ˆroom ownerï¼‰ã‚’å¿…é ˆã«ã—ã€ãƒ«ãƒ¼ãƒ ç®¡ç†è€…ä¸åœ¨ã‚’è¨±ã•ãªã„ï¼ˆè‡ªæ²»ã®è²¬ä»»è€…ã‚’æ˜ç¢ºåŒ–ï¼‰
  - å†…å®¹ã¯é€šå¸¸é–²è¦§ä¸å¯ã§ã€ç›£æŸ»ç›®çš„ã® break-glass ã«ã‚ˆã£ã¦ã®ã¿é–²è¦§å¯èƒ½
  - ç§çš„ãƒ«ãƒ¼ãƒ ã¯å¤–éƒ¨é€£æºã‚’ç¦æ­¢ï¼ˆå¤–éƒ¨é€£æºãŒå¿…è¦ãªã‚‰å…¬å¼ãƒ«ãƒ¼ãƒ ã¨ã—ã¦ä½œæˆã™ã‚‹ï¼‰
  - DMï¼ˆ1:1ï¼‰ã¯ç§çš„ãƒ«ãƒ¼ãƒ ã®ä¸€ç¨®ã¨ã—ã¦æ‰±ã†ï¼ˆç®¡ç†è€…è¨­å®šã§DMã‚’ç„¡åŠ¹åŒ–ã§ãã‚‹ï¼‰
    - external_chat ã¯DMç¦æ­¢
    - DMã®ãƒ«ãƒ¼ãƒ ç®¡ç†è€…ï¼ˆownerï¼‰ã®æ‰±ã„ã¯è¦è¨­è¨ˆï¼ˆä¾‹: ä¸¡å‚åŠ è€…ã‚’ owner ã¨ã¿ãªã™ï¼‰

### ã€Œä¼šç¤¾ãŒèªçŸ¥ã™ã‚‹ã€ç¯„å›²ï¼ˆæ±ºå®š: Bï¼‰
- ä¼šç¤¾ï¼ˆadmin/mgmt/exec/ç›£æŸ»æ¨©é™è€…ï¼‰ã¯ã€ãƒ«ãƒ¼ãƒ ã®å­˜åœ¨ã¨ãƒ¡ã‚¿æƒ…å ±ã‚’æŠŠæ¡ã§ãã‚‹ï¼ˆå¸¸æ™‚ç›£è¦–ã§ã¯ãªãã€ŒæŠŠæ¡ã§ãã‚‹ã€çŠ¶æ…‹ï¼‰
  - ä¾‹: roomId / ç¨®åˆ¥ / è¡¨ç¤ºå / ä½œæˆè€… / ãƒ«ãƒ¼ãƒ ç®¡ç†è€… / ãƒ¡ãƒ³ãƒãƒ¼æ•° / æœ€çµ‚ç™ºè¨€æ™‚åˆ» / å¤–éƒ¨é€£æºã®æœ‰ç„¡
  - ãƒ¡ãƒ³ãƒãƒ¼ä¸€è¦§ã®é–²è¦§ã‚’è¨±å¯ã™ã‚‹ï¼ˆé–²è¦§è‡ªä½“ã‚‚ç›£æŸ»ãƒ­ã‚°å¯¾è±¡ã¨ã™ã‚‹ï¼‰
- é€šå¸¸ã®ç®¡ç†æ¨©é™ã§ã¯æœ¬æ–‡/æ·»ä»˜ã®ã€Œå†…å®¹ã€ã¯é–²è¦§ã§ããªã„ï¼ˆå†…å®¹ã¯ break-glass çµŒç”±ã®ã¿ï¼‰
- ç›£æŸ»ç›®çš„ã® break-glassï¼ˆç†ç”±+ãƒ­ã‚°+æ‰¿èªï¼‰ã«ã‚ˆã‚Šã€å¿…è¦æ™‚ã¯å†…å®¹ã‚‚é–²è¦§ã§ãã‚‹

### ç§çš„ã‚°ãƒ«ãƒ¼ãƒ—ã®è‡ªæ²»ï¼ˆæ¡ˆï¼‰
- ç§çš„ã‚°ãƒ«ãƒ¼ãƒ—ã¯ã€ãƒ«ãƒ¼ãƒ ç®¡ç†è€…ï¼ˆroom ownerï¼‰ã‚’å¿…é ˆã¨ã™ã‚‹
  - å‚åŠ è€…ã®æ‹›å¾…/é€€å‡ºã€ãƒ«ãƒ¼ãƒ è¨­å®šå¤‰æ›´ã®è²¬ä»»ã‚’æŒã¤
  - ãƒ«ãƒ¼ãƒ ç®¡ç†è€…ãŒä¸åœ¨ã«ãªã‚‰ãªã„ã‚ˆã†ã«ã€é€€å‡ºæ™‚ã¯ãƒ«ãƒ¼ãƒ ç®¡ç†è€…ç§»è­²ã‚’å¿…é ˆã«ã™ã‚‹
- è‡ªæ²»ã®å‰æï¼ˆæ¡ˆï¼‰
  - ç§çš„ãƒ«ãƒ¼ãƒ ã§ã‚‚ã€ä¼šç¤¾ã®æƒ…å ±ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£/ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è¦ç¨‹ã®å¯¾è±¡ï¼ˆã€Œä¼šç¤¾ã®ã‚·ã‚¹ãƒ†ãƒ ä¸Šã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ã§ã‚ã‚‹ã“ã¨ã¯æ˜ç¤ºã™ã‚‹ï¼‰
  - ä¼šç¤¾ã¯å¸¸æ™‚ç›£è¦–ã—ãªã„ãŒã€é€šå ±ã‚„ç›£æŸ»è¦è«‹ãŒã‚ã£ãŸå ´åˆã¯ã€è¦ç¨‹ã«åŸºã¥ãèª¿æŸ»ã§ãã‚‹çŠ¶æ…‹ï¼ˆbreak-glassï¼‰ã‚’æ‹…ä¿ã™ã‚‹
- ä¼šç¤¾è²¬ä»»ã¨ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•
  - é‹ç”¨ã¯è‡ªæ²»ï¼ˆä¼šç¤¾ãŒå¸¸æ™‚ç›£è¦–ã—ãªã„ï¼‰ã¨ã—ã¤ã¤ã€ç›£æŸ»ãƒ»èª¿æŸ»ã®å¿…è¦ãŒç”Ÿã˜ãŸå ´åˆã« break-glass ã‚’è¡Œãˆã‚‹çŠ¶æ…‹ã«ã™ã‚‹
  - ä¼šç¤¾å´ã®å¼·åˆ¶æªç½®ï¼ˆå¼·åˆ¶ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–/å‡çµ/é€€ä¼šãªã©ï¼‰ãŒå¿…è¦ã«ãªã‚‹å ´åˆã¯ã€ã™ã¹ã¦ç†ç”±å¿…é ˆ + ç›£æŸ»ãƒ­ã‚°å¿…é ˆ

### ä¼šç¤¾å´ã®å¼·åˆ¶æªç½®ï¼ˆæ¡ˆï¼‰
- æƒ³å®šã‚¢ã‚¯ã‚·ãƒ§ãƒ³: ãƒ«ãƒ¼ãƒ å‡çµï¼ˆread-onlyï¼‰/ å¼·åˆ¶ã‚¢ãƒ¼ã‚«ã‚¤ãƒ– / å¤–éƒ¨é€£æºåœæ­¢ / ãƒ«ãƒ¼ãƒ ç®¡ç†è€…å†è¨­å®š / ãƒ¡ãƒ³ãƒãƒ¼å¼·åˆ¶é€€ä¼š
- ã™ã¹ã¦ `reasonCode + reasonText` ã‚’å¿…é ˆã¨ã—ã€ç›£æŸ»ãƒ­ã‚°ã¸è¨˜éŒ²ã™ã‚‹
- åŸå‰‡ã¨ã—ã¦ãƒ«ãƒ¼ãƒ å†…ã«ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ®‹ã™ï¼ˆå¼·åˆ¶æªç½®ãŒè¡Œã‚ã‚ŒãŸäº‹å®ŸãŒæ¶ˆãˆãªã„ï¼‰

### å¤–éƒ¨é€£æºï¼ˆæ±ºå®šï¼‰
- å¤–éƒ¨é€£æºã§ãã‚‹ã®ã¯å…¬å¼ãƒ«ãƒ¼ãƒ ã®ã¿
  - ç§çš„ãƒ«ãƒ¼ãƒ ã¯ã€å¤–éƒ¨ãƒ¦ãƒ¼ã‚¶æ‹›å¾…ã‚„å¤–éƒ¨é€šçŸ¥/Webhookã‚’ç¦æ­¢ã™ã‚‹
  - AIãŒå¤–éƒ¨LLMç­‰ã«é€ä¿¡ã™ã‚‹æ–¹å¼ã®å ´åˆã¯ã€Œå¤–éƒ¨é€£æºã€ã¨ã¿ãªã—ã€å…¬å¼ãƒ«ãƒ¼ãƒ ã®ã¿è¨±å¯ï¼ˆç§çš„ãƒ«ãƒ¼ãƒ ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç„¡åŠ¹ï¼‰

## ç›£æŸ»ç›®çš„ break-glassï¼ˆæ¡ˆï¼‰
### ç›®çš„
- ä¸æ­£/ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆ/æƒ…å ±æ¼ãˆã„ç­‰ã®èª¿æŸ»ã€ç›£æŸ»å¯¾å¿œã®ãŸã‚ã«ã€ç§çš„ãƒ«ãƒ¼ãƒ ã‚’å«ã‚€ãƒãƒ£ãƒƒãƒˆå†…å®¹ã¸ä¾‹å¤–çš„ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ä»•çµ„ã¿ã‚’æä¾›ã™ã‚‹

### ç›£æŸ»ã®åŸå‰‡ï¼ˆæ¡ˆï¼‰
- ç›£æŸ»é–²è¦§ã¯ã€Œä¾‹å¤–ã€ã§ã‚ã‚Šã€ç›®çš„å¤–åˆ©ç”¨ã‚’ç¦æ­¢ã™ã‚‹ï¼ˆç”³è«‹ç†ç”±ã¨å®Ÿæ–½ç†ç”±ã‚’ç›£æŸ»ãƒ­ã‚°ã§è¿½ãˆã‚‹ã“ã¨ï¼‰
- ç›£æŸ»é–²è¦§ã¯ read-onlyï¼ˆæŠ•ç¨¿/ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³/ç·¨é›†/å‰Šé™¤ãªã©ã®æ“ä½œã¯ä¸å¯ï¼‰
- ç›£æŸ»é–²è¦§ã§å‚ç…§ã—ãŸç¯„å›²ï¼ˆãƒ«ãƒ¼ãƒ ã€æœŸé–“ã€æ·»ä»˜ã®å–å¾—ãªã©ï¼‰ã‚’ç›£æŸ»ãƒ­ã‚°ã«æ®‹ã™

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆæ¡ˆï¼‰
1. ç›£æŸ»é–²è¦§ç”³è«‹ï¼ˆrequestï¼‰
   - ç”³è«‹è€…: mgmt/execï¼ˆMVPæ¡ˆã€‚admin ã¯ç”³è«‹è€…ã«ã—ãªã„ï¼‰
   - å…¥åŠ›: reasonCode + reasonTextï¼ˆå¿…é ˆï¼‰ã€å¯¾è±¡ãƒ«ãƒ¼ãƒ ã€å¯¾è±¡æœŸé–“ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä¾‹: 30æ—¥ï¼‰ã€é–²è¦§æœŸé–“ï¼ˆTTLï¼‰ã€é–²è¦§è€…ï¼ˆç›£æŸ»æ‹…å½“ï¼‰
2. äºŒé‡æ‰¿èªï¼ˆapproveï¼‰
   - ä¾‹: mgmt + exec ã®äºŒé‡æ‰¿èªï¼ˆåŒä¸€äººç‰©/åŒä¸€ãƒ­ãƒ¼ãƒ«ã®ã¿ã§ã®å®Œçµã‚’ä¸å¯ï¼‰
3. é–²è¦§è¨±å¯ï¼ˆgrantï¼‰
   - è¨±å¯ã•ã‚ŒãŸç›£æŸ»è€…ã®ã¿é–²è¦§å¯èƒ½
   - é–²è¦§å¯èƒ½æœŸé–“ï¼ˆä¾‹: 24hï¼‰ã‚’éããŸã‚‰è‡ªå‹•å¤±åŠ¹
4. é–²è¦§å®Ÿè¡Œï¼ˆaccessï¼‰
   - å®Ÿéš›ã«é–²è¦§ã—ãŸäº‹å®Ÿï¼ˆèª°ãŒ/ã„ã¤/ã©ã®ç¯„å›²ï¼‰ã‚’ç›£æŸ»ãƒ­ã‚°ã¸è¨˜éŒ²

### reasonCodeï¼ˆæ¡ˆï¼‰
- `harassment`ï¼ˆãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆï¼‰
- `fraud`ï¼ˆä¸æ­£ï¼‰
- `security_incident`ï¼ˆæƒ…å ±æ¼ãˆã„/ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£äº‹æ•…ï¼‰
- `legal`ï¼ˆæ³•ä»¤/ç›£æŸ»å¯¾å¿œï¼‰
- `other`ï¼ˆãã®ä»–ï¼‰

### ã€Œäº‹å‰ã«åˆ†ã‹ã‚‹ã€ä»•çµ„ã¿ï¼ˆæ¡ˆï¼‰
- ç›£æŸ»é–²è¦§ãŒç”³è«‹/æ‰¿èªã•ã‚ŒãŸæ™‚ç‚¹ã§ã€ãƒ«ãƒ¼ãƒ å†…ã«ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»ãƒãƒŠãƒ¼ã‚’è¡¨ç¤ºã—ã¦é€šçŸ¥ã™ã‚‹
- å°‘ãªãã¨ã‚‚ç§çš„ãƒ«ãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ ç®¡ç†è€…ã«ã¯å¿…ãšé€šçŸ¥ã™ã‚‹ï¼ˆMVPã¯å…¨ãƒ¡ãƒ³ãƒãƒ¼ã«ã‚‚è¡¨ç¤ºï¼‰
- é€šçŸ¥è¡¨ç¤ºã¨é–²è¦§æ¨©ä»˜ä¸ã¯åŒä¸€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§ç¢ºå®šã—ã€é€šçŸ¥ãŒæ®‹ã‚‰ãªã„çŠ¶æ…‹ã§ã®é–²è¦§ã‚’ä¸å¯èƒ½ã«ã™ã‚‹
- é€šçŸ¥å†…å®¹ï¼ˆæ¡ˆï¼‰
  - requestId / å¯¾è±¡æœŸé–“ / é–²è¦§è€…ï¼ˆç›£æŸ»æ‹…å½“ï¼‰/ reasonCode ã‚’å«ã‚ã‚‹
  - reasonText ã¯ã€ãƒ«ãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¸ã®é€šçŸ¥ã«ã¯å«ã‚ãªã„ï¼ˆç›£æŸ»ãƒ­ã‚°/ç›£æŸ»ç”»é¢ã§ã®ã¿å‚ç…§ï¼‰
- çŒ¶äºˆæ™‚é–“ï¼ˆcooldownï¼‰ã‚’å°å…¥ã™ã‚‹å ´åˆã¯ã€å…¬å¼/ç§çš„ã§åˆ¥è¨­å®šå¯èƒ½ã«ã™ã‚‹ï¼ˆMVPã¯ cooldown=0 ã‚’æƒ³å®šï¼‰

### break-glass ã‚’ä½¿ã£ãŸã“ã¨ãŒåˆ†ã‹ã‚‹ä»•çµ„ã¿ï¼ˆæ¡ˆï¼‰
- é–²è¦§ç”³è«‹/æ‰¿èª/é–²è¦§é–‹å§‹/é–²è¦§çµ‚äº†ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€Œã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã‚’æ®‹ã™
  - ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯å‰Šé™¤ä¸å¯ï¼ˆé–²è¦§ã®äº‹å®ŸãŒæ¶ˆãˆãªã„ï¼‰
  - å°‘ãªãã¨ã‚‚ãƒ«ãƒ¼ãƒ ç®¡ç†è€…ã¯å¿…ãšè¦–èªã§ãã‚‹ï¼ˆMVPã¯å…¨ãƒ¡ãƒ³ãƒãƒ¼ã«è¡¨ç¤ºï¼‰
- ç›£æŸ»é–²è¦§ã®å±¥æ­´ï¼ˆrequestIdã€ç”³è«‹è€…ã€æ‰¿èªè€…ã€é–²è¦§è€…ã€å¯¾è±¡æœŸé–“ã€å®Ÿè¡Œæ—¥æ™‚ã€ç†ç”±ï¼‰ã‚’ãƒ«ãƒ¼ãƒ è¨­å®š/ç›£æŸ»ç”»é¢ã‹ã‚‰å‚ç…§ã§ãã‚‹
  - å‚ç…§æ¨©é™ï¼ˆæ¡ˆï¼‰: ãƒ«ãƒ¼ãƒ ç®¡ç†è€… + mgmt/exec
  - reasonText ã®å‚ç…§ã¯ mgmt/exec ã®ã¿ï¼ˆãƒ«ãƒ¼ãƒ ç®¡ç†è€…ã¯ reasonCode ã¾ã§ï¼‰

### æ”¹ã–ã‚“ãƒ»å‰Šé™¤å¯¾ç­–ï¼ˆæ¡ˆï¼‰
- ãƒãƒ£ãƒƒãƒˆã¯ãƒãƒ¼ãƒ‰ãƒ‡ãƒªãƒ¼ãƒˆç¦æ­¢ï¼ˆå¾Œè¿°ï¼‰
- break-glass ã®ç”³è«‹/æ‰¿èª/é–²è¦§ã¯å‰Šé™¤ä¸å¯ã®ç›£æŸ»ãƒ­ã‚°ã¨ã—ã¦æ®‹ã™
- ç›£æŸ»ãƒ­ã‚°ã¯æ—¢å­˜ã®æ”¹ã–ã‚“æ¤œçŸ¥ï¼ˆãƒãƒƒã‚·ãƒ¥ãƒã‚§ãƒ¼ãƒ³/å¤–éƒ¨ä¿å…¨æ–¹é‡ï¼‰ã¨æ•´åˆã•ã›ã‚‹

## å‰Šé™¤/ç·¨é›†/ä¿æŒï¼ˆæ¡ˆï¼‰
- æŠ•ç¨¿ã¯åŸå‰‡ã€Œç·¨é›†ã€ã§ã¯ãªãã€Œè¿½è¨˜ã€ã‚’æ¨å¥¨ï¼ˆé‹ç”¨/UXã¯è¦æ¤œè¨ï¼‰
- ç·¨é›†ã‚’è¨±å¯ã™ã‚‹å ´åˆã¯ revision ã‚’ä¿æŒã—ã€ç›£æŸ»é–²è¦§ã§ã¯æ”¹ç‰ˆå±¥æ­´ã‚‚é–²è¦§ã§ãã‚‹
- å‰Šé™¤ã¯è«–ç†å‰Šé™¤ï¼ˆè¡¨ç¤ºä¸Šã¯ã€Œå‰Šé™¤æ¸ˆã¿ã€ã«ç½®æ›ï¼‰ã¨ã—ã€åŸæ–‡ã¯ç›£æŸ»ä¸Šã®è¿½è·¡ãŒå¯èƒ½ãªå½¢ã§ä¿æŒã™ã‚‹
  - ãƒ¦ãƒ¼ã‚¶å‘ã‘ã«ã¯å‰Šé™¤ã§ããŸã‚ˆã†ã«è¦‹ãˆã¦ã‚‚ã€ç›£æŸ»ç›®çš„ã®é–²è¦§ã‚„ç›£æŸ»ãƒ­ã‚°ã§ã¯è¿½è·¡å¯èƒ½ï¼ˆå®Œå…¨å‰Šé™¤ã¯ä¸å¯ï¼‰
  - å‰Šé™¤ç†ç”±ã‚’å¿…é ˆåŒ–ã—ã€ç”¨é€”åˆ¥ã«æ‰±ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼ˆä¾‹: `user_retract` / `admin_moderation` / `legal_hold` / `other`ï¼‰

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
### ProjectChatMessage
- `id`: UUID
- `projectId`: å‚ç…§å…ˆ `Project`
- `userId`: æŠ•ç¨¿è€…ã®ID
- `body`: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æœ¬æ–‡
- `tags`: JSONé…åˆ—ï¼ˆæ–‡å­—åˆ—ã®ã‚¿ã‚°ä¸€è¦§ï¼‰
- `reactions`: JSONãƒãƒƒãƒ—ï¼ˆemoji -> { count, userIds[] }ï¼‰
- `ackRequest`: ç¢ºèªä¾é ¼ï¼ˆä»»æ„ã€ç‰¹åˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰
- `createdAt/createdBy`, `updatedAt/updatedBy`
- `deletedAt/deletedReason`ï¼ˆè«–ç†å‰Šé™¤ç”¨ã€APIæœªå®Ÿè£…ï¼‰

### ProjectChatAckRequestï¼ˆç¢ºèªä¾é ¼ï¼‰
- `id`: UUID
- `messageId`: å‚ç…§å…ˆ `ProjectChatMessage`ï¼ˆ1:1ï¼‰
- `projectId`: å‚ç…§å…ˆ `Project`ï¼ˆæ¤œç´¢/ä¸€è¦§ç”¨é€”ï¼‰
- `requiredUserIds`: JSONé…åˆ—ï¼ˆç¢ºèªå¯¾è±¡ãƒ¦ãƒ¼ã‚¶IDã€é‡è¤‡ãªã—ã‚’æƒ³å®šï¼‰
- `dueAt`: ä»»æ„ï¼ˆæœŸé™ï¼‰
- `createdAt/createdBy`

### ProjectChatAckï¼ˆç¢ºèªï¼‰
- `id`: UUID
- `requestId`: å‚ç…§å…ˆ `ProjectChatAckRequest`
- `userId`: ç¢ºèªã—ãŸãƒ¦ãƒ¼ã‚¶ID
- `ackedAt`

### ProjectChatAttachmentï¼ˆæ·»ä»˜ï¼‰
- `id`: UUID
- `messageId`: å‚ç…§å…ˆ `ProjectChatMessage`
- `provider`: `local` / `gdrive`
- `providerKey`: ä¿å­˜å…ˆå´ã®ã‚­ãƒ¼ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ¼/Drive fileId ç­‰ï¼‰
- `sha256`: ä»»æ„
- `sizeBytes`: ä»»æ„
- `mimeType`: ä»»æ„
- `originalName`: å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«å
- `createdAt/createdBy`
- `deletedAt/deletedReason`ï¼ˆè«–ç†å‰Šé™¤ç”¨ã€APIæœªå®Ÿè£…ï¼‰

### ProjectChatReadStateï¼ˆæœªèª­/æ—¢èª­ï¼šè‡ªåˆ†ã®ã¿ï¼‰
- `id`: UUID
- `projectId`: å‚ç…§å…ˆ `Project`
- `userId`: ãƒ¦ãƒ¼ã‚¶ID
- `lastReadAt`: æœ€çµ‚æ—¢èª­æ™‚åˆ»ï¼ˆã“ã®æ™‚åˆ»ã‚ˆã‚Šæ–°ã—ã„æŠ•ç¨¿ã‚’æœªèª­ã¨ã—ã¦æ•°ãˆã‚‹ï¼‰
- `createdAt/updatedAt`

### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- `projectId, createdAt`

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼ˆæ‹¡å¼µæ¡ˆï¼‰
- ChatRoomï¼ˆtype, name, projectId?, groupId?, allowExternal, createdBy ãªã©ï¼‰
- ChatRoomMemberï¼ˆroomId, userId, role, lastReadAt ãªã©ï¼‰
- ChatMessageï¼ˆroomId, userId, bodyMarkdown, createdAt, messageType ãªã©ï¼‰â€»Markdownæœ¬æ–‡
- ChatAttachmentï¼ˆmessageId, storageKey, fileName, mime, size ãªã©ï¼‰
- ChatMentionï¼ˆmessageId, targetType, targetId ãªã©ï¼‰â€»ä¾‹: targetType = 'user' | 'group' | 'all'
- ChatMessageAckRequestï¼ˆmessageId, requiredUserIds, requiredAll, dueAt ãªã©ï¼‰
- ChatMessageAckï¼ˆmessageId, userId, ackedAtï¼‰
- ChatBreakGlassRequestï¼ˆroomId, requesterUserId, reasonCode, reasonText, status, approverUserId, approvedAt, grantedAt, expiresAt ãªã©ï¼‰
- ChatBreakGlassEventï¼ˆrequestId, actorUserId, action, at, scope ãªã©ï¼‰

## API
### ç¾è¡ŒAPI
### GET `/projects/:projectId/chat-messages`
**Query**
- `limit` (default 50, max 200)
- `before` (ISOæ—¥æ™‚ã€‚ã“ã‚Œä»¥å‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—)
- `tag` (ä»»æ„ã€‚ã‚¿ã‚°ãŒä¸€è‡´ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿)

**æŒ™å‹•**
- `createdAt` é™é †ã§å–å¾—
- `tag` ã¯ãƒˆãƒªãƒ å¾Œã®å®Œå…¨ä¸€è‡´ã§ãƒ•ã‚£ãƒ«ã‚¿
- `tag` ãŒç©º/æœªæŒ‡å®šã®å ´åˆã¯ãƒ•ã‚£ãƒ«ã‚¿ãªã—

**ã‚¨ãƒ©ãƒ¼**
- `limit` ãŒæ­£æ•°ã§ãªã„å ´åˆã¯ 400
- `before` ãŒä¸æ­£ãªæ—¥ä»˜ã®å ´åˆã¯ 400
- `tag` ãŒ 32 æ–‡å­—è¶…ã®å ´åˆã¯ 400

### POST `/projects/:projectId/chat-messages`
**Body**
- `body` (1ã€œ2000æ–‡å­—)
- `tags` (ä»»æ„: 0ã€œ8ä»¶ã€å„32æ–‡å­—ã¾ã§)
- `mentions` (ä»»æ„)
  - `userIds` (ä»»æ„: 0ã€œ50ä»¶)
  - `groupIds` (ä»»æ„: 0ã€œ20ä»¶)
  - `all` (ä»»æ„: `true` ã®å ´åˆã¯ @all æ‰±ã„)

**æŒ™å‹•**
- `userId` ã¯èªè¨¼æƒ…å ±ã‹ã‚‰å–å¾—
- èªè¨¼æƒ…å ±ãŒä¸è¶³ã™ã‚‹å ´åˆã¯ `demo-user` ã‚’ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆPoCå‘ã‘ï¼‰
  - æœ¬ç•ªç’°å¢ƒã§ã¯ç„¡åŠ¹åŒ–ã—ã€401/403 ã‚’è¿”ã™å‰æ
  - `demo-user` ã¯æ˜ç¤ºçš„ãªè¨­å®šãƒ•ãƒ©ã‚°ã§ã®ã¿æœ‰åŠ¹åŒ–ã™ã‚‹
- `mentions.all=true` ã®å ´åˆã¯æŠ•ç¨¿å›æ•°åˆ¶é™ï¼ˆrate limitï¼‰ã‚’é©ç”¨ã™ã‚‹
  - `CHAT_ALL_MENTION_MIN_INTERVAL_SECONDS` (default: 3600)
  - `CHAT_ALL_MENTION_MAX_PER_24H` (default: 3)
  - è¶…éæ™‚ã¯ 429 ã‚’è¿”ã™

### POST `/projects/:projectId/chat-ack-requests`
**Body**
- `body` (1ã€œ2000æ–‡å­—)
- `requiredUserIds` (1ã€œ50ä»¶)
- `dueAt` (ä»»æ„: ISOæ—¥æ™‚)
- `tags` (ä»»æ„: 0ã€œ8ä»¶ã€å„32æ–‡å­—ã¾ã§)
- `mentions` (ä»»æ„)
  - `userIds` (ä»»æ„: 0ã€œ50ä»¶)
  - `groupIds` (ä»»æ„: 0ã€œ20ä»¶)
  - `all` (ä»»æ„: `true` ã®å ´åˆã¯ @all æ‰±ã„)

**æŒ™å‹•**
- é€šå¸¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ + `ProjectChatAckRequest` ã‚’1ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§ä½œæˆã™ã‚‹
- `requiredUserIds` ã¯ãƒˆãƒªãƒ ã—ã¦é‡è¤‡æ’é™¤ã™ã‚‹ï¼ˆAPIå´ã§æ­£è¦åŒ–ï¼‰
- `mentions.all=true` ã®å ´åˆã¯æŠ•ç¨¿å›æ•°åˆ¶é™ï¼ˆrate limitï¼‰ã‚’é©ç”¨ã™ã‚‹ï¼ˆè©³ç´°ã¯ `POST /chat-messages` ã¨åŒæ§˜ï¼‰

### GET `/projects/:projectId/chat-mention-candidates`
**æŒ™å‹•**
- UIã§ã®è£œå®Œé¸æŠç”¨ã«ã€ãƒ¦ãƒ¼ã‚¶å€™è£œï¼ˆæ¡ˆä»¶ãƒ¡ãƒ³ãƒãƒ¼ä¸­å¿ƒï¼‰ã¨ã‚°ãƒ«ãƒ¼ãƒ—å€™è£œï¼ˆJWTã® `group_ids`ï¼‰ã‚’è¿”ã™
- `allowAll=false` ã®å ´åˆã€UIã¯ @all ã‚’é¸ã¹ãªã„ï¼ˆä¾‹: external_chatï¼‰

### POST `/chat-ack-requests/:id/ack`
**Body**
- ãªã—

**æŒ™å‹•**
- `requiredUserIds` ã«å«ã¾ã‚Œã‚‹ãƒ¦ãƒ¼ã‚¶ã®ã¿ OK/ç¢ºèªã§ãã‚‹
- äºŒé‡é€ä¿¡ã¯å†ªç­‰ï¼ˆåŒä¸€ãƒ¦ãƒ¼ã‚¶ã¯1å›ã®ã¿è¨˜éŒ²ã•ã‚Œã‚‹ï¼‰

### POST `/chat-messages/:id/attachments`
**Body**
- `multipart/form-data` ã§ `file` ã‚’é€ä¿¡

**æŒ™å‹•**
- `messageId` ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«æ·»ä»˜ã‚’è¿½åŠ ã™ã‚‹
- provider ã¯ `CHAT_ATTACHMENT_PROVIDER` ã«å¾“ã†ï¼ˆ`local`/`gdrive`ï¼‰
- `CHAT_ATTACHMENT_MAX_BYTES` ã‚’è¶…ãˆã‚‹å ´åˆã¯ 413 ã‚’è¿”ã™

### GET `/chat-attachments/:id`
**æŒ™å‹•**
- ERPã®æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼ˆæ¡ˆä»¶ã‚¢ã‚¯ã‚»ã‚¹ï¼‰ã‚’é€šéã—ãŸå ´åˆã®ã¿ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯èƒ½
- èªè¨¼ã¯ãƒ˜ãƒƒãƒ€ãƒ™ãƒ¼ã‚¹ã®ãŸã‚ã€UIå´ã¯ `fetch` ã§å–å¾—ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ï¼ˆç›´ãƒªãƒ³ã‚¯ã§ã¯ãªã„ï¼‰

### GET `/projects/:projectId/chat-unread`
**æŒ™å‹•**
- è‡ªåˆ†ã®æœªèª­ä»¶æ•°ã¨ `lastReadAt` ã‚’è¿”ã™ï¼ˆä»–äººã®æ—¢èª­/æœªèª­ã¯è¿”ã•ãªã„ï¼‰

### POST `/projects/:projectId/chat-read`
**æŒ™å‹•**
- è‡ªåˆ†ã® `lastReadAt` ã‚’ `now()` ã«æ›´æ–°ã™ã‚‹ï¼ˆMVPã¯ã€Œèª­ã¿è¾¼ã¿ã€æ™‚ç‚¹ã§æ›´æ–°ã™ã‚‹é‹ç”¨ï¼‰

### POST `/chat-messages/:id/reactions`
**Body**
- `emoji` (1ã€œ16æ–‡å­—)

**æŒ™å‹•**
- åŒä¸€ãƒ¦ãƒ¼ã‚¶ã®åŒä¸€emojiã¯1å›ã®ã¿åŠ ç®—
- å½¢å¼ã¯ `{ emoji: { count, userIds[] } }`
- æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ãŒæ•°å€¤ã®å ´åˆã¯äº’æ›æ‰±ã„ã§æ›´æ–°ã™ã‚‹

### æ‹¡å¼µAPIï¼ˆæ¡ˆï¼‰
- `GET /chat-rooms`ï¼ˆå‚åŠ å¯èƒ½ãªãƒãƒ£ãƒƒãƒˆä¸€è¦§ï¼‰
- `POST /chat-rooms`ï¼ˆæ–°è¦ä½œæˆ/è¨­å®šï¼‰
- `GET /chat-rooms/:id/messages`ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—ï¼‰
- `POST /chat-rooms/:id/messages`ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŠ•ç¨¿ï¼‰
- `POST /chat-rooms/:id/read`ï¼ˆæ—¢èª­æ›´æ–°ï¼‰
- `GET /chat-rooms/:id/unread-counts`ï¼ˆæœªèª­ä»¶æ•°ï¼‰
- `POST /chat-messages/:id/attachments`ï¼ˆæ·»ä»˜ï¼‰
- `GET /chat-search?q=`ï¼ˆæ¤œç´¢ï¼‰
- `POST /chat-break-glass/requests`ï¼ˆç›£æŸ»é–²è¦§ç”³è«‹ï¼‰
- `POST /chat-break-glass/requests/:id/approve`ï¼ˆæ‰¿èªï¼‰
- `POST /chat-break-glass/requests/:id/reject`ï¼ˆå´ä¸‹ï¼‰
- `GET /chat-break-glass/requests`ï¼ˆç”³è«‹ä¸€è¦§/å±¥æ­´ï¼‰

## UIï¼ˆProjectChatï¼‰
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé¸æŠã€èª­ã¿è¾¼ã¿ã€æŠ•ç¨¿ã€ã‚¿ã‚°è¡¨ç¤ºã€ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- ã‚¿ã‚°çµã‚Šè¾¼ã¿å…¥åŠ›ï¼ˆé©ç”¨ã¯ã€Œèª­ã¿è¾¼ã¿ã€ãƒœã‚¿ãƒ³ï¼‰
- è¿½åŠ èª­ã¿è¾¼ã¿ï¼ˆ`before` ä½¿ç”¨ï¼‰
- æ—¢å®šã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³å€™è£œ: ğŸ‘/ğŸ‰/â¤ï¸/ğŸ˜‚/ğŸ™/ğŸ‘€

## UIï¼ˆæ‹¡å¼µæ–¹é‡ï¼‰
- æœªèª­/æ—¢èª­è¡¨ç¤ºï¼ˆè¨­å®šã«å¿œã˜ã¦è¡¨ç¤ºæ–¹å¼ã‚’åˆ‡æ›¿ï¼‰
- ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³å…¥åŠ›æ”¯æ´
- Markdownãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
- éƒ¨é–€/å…¨ç¤¾/DM ã‚’å«ã‚€ã€Œãƒ«ãƒ¼ãƒ ä¸€è¦§ã€ã¨ä½œæˆãƒ»å‚åŠ ãƒ•ãƒ­ãƒ¼
- æ·»ä»˜/æ¤œç´¢/é€šçŸ¥è¨­å®šã®å°ç·šï¼ˆãƒ«ãƒ¼ãƒ å˜ä½/å€‹äººå˜ä½ï¼‰
- AIæ”¯æ´ï¼ˆè¦ç´„/ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡ºï¼‰è¡¨ç¤ºã®å°ç·š
- break-glass ã®ãƒãƒŠãƒ¼/å±¥æ­´è¡¨ç¤ºï¼ˆãƒ«ãƒ¼ãƒ å˜ä½ï¼‰
- ç›£æŸ»è€…å‘ã‘ã®ç”³è«‹/æ‰¿èª/é–²è¦§UIï¼ˆç®¡ç†ç”»é¢ã¾ãŸã¯ç›£æŸ»ç”»é¢ï¼‰

## ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³/åˆ¶ç´„
- æœ¬æ–‡: 1ã€œ2000æ–‡å­—
- ã‚¿ã‚°: æœ€å¤§8ä»¶ã€å„32æ–‡å­—
- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³emoji: 1ã€œ16æ–‡å­—

## ãƒ†ã‚¹ãƒˆ
- E2Eã‚¹ãƒ¢ãƒ¼ã‚¯ã«ã€ŒæŠ•ç¨¿/ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€å«ã‚€
  - `packages/frontend/e2e/frontend-smoke.spec.ts`

## æœªå®Ÿè£…/å¾Œç¶šã‚¹ã‚³ãƒ¼ãƒ—
- ãƒ«ãƒ¼ãƒ æ©Ÿèƒ½ï¼ˆéƒ¨é–€/å…¨ç¤¾/DM/ç§çš„ã‚°ãƒ«ãƒ¼ãƒ—ï¼‰ã¨ç®¡ç†è€…è¨­å®šï¼ˆDMç„¡åŠ¹åŒ–ï¼‰
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç·¨é›†/å‰Šé™¤ï¼ˆè«–ç†å‰Šé™¤APIï¼‰
- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å–ã‚Šæ¶ˆã—ï¼ˆãƒˆã‚°ãƒ«ï¼‰
- æ·»ä»˜/ç”»åƒ/ãƒ•ã‚¡ã‚¤ãƒ«
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ï¼ˆWS/ãƒãƒ¼ãƒªãƒ³ã‚°ï¼‰
- ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³/é€šçŸ¥é€£æºï¼ˆè¨­è¨ˆä¸­ãƒ»æ±ºå®šäº‹é …/æœªæ±ºå®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«åŸºã¥ãå¾Œç¶šå®Ÿè£…ï¼‰
- æ—¢èª­/æœªèª­ã®è¡¨ç¤º/è¨­å®šï¼ˆè¨­è¨ˆä¸­ãƒ»æ±ºå®šäº‹é …/æœªæ±ºå®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«åŸºã¥ãå¾Œç¶šå®Ÿè£…ï¼‰
- æ¤œç´¢ï¼ˆãƒãƒ£ãƒƒãƒˆã®ã¿/ERPæ¨ªæ–­ã®åˆ‡æ›¿ï¼‰
- AIæ”¯æ´ï¼ˆè¦ç´„/ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡º/FAQ/æ¤œç´¢æ”¯æ´ï¼‰
- è¤‡æ•°ã‚¿ã‚°ã® AND/OR æ¤œç´¢

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `docs/requirements/data-model-sketch.md`
- `docs/requirements/domain-api-draft.md`
- `docs/requirements/frontend-api-wire.md`
- `docs/requirements/rbac-matrix.md`
- `docs/requirements/access-control.md`
