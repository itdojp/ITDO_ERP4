# フロント PoC 方針（12/10 ステージング向け）

目的: 日報/ウェルビーイング、工数入力、請求ドラフト閲覧＋送信Stub、ダッシュボードのアラート表示を短期で実装する。

## 技術スタック（案）
- Next.js or React + Vite（SSR/SPAどちらでも可）
- UI: シンプルなフォーム/テーブル。モバイル対応（レスポンシブ）必須。
- 認証: デバッグモードで user/role をヘッダ指定（AUTH_MODE=hybrid）、Google OIDC のIDトークンも受け付ける

## 画面
- ダッシュボード: 未承認/アラートを一覧。アラートはメール送信Stubと同期。
- 日報+ウェルビーイング: Good/Not Good + ヘルプ、メモ欄。日報本文入力（複数プロジェクト選択可）。
- 工数入力: 日次/週次切替、案件/タスク/時間/場所/残業区分。修正時の承認状態表示。
- 請求ドラフト: 一覧/詳細で番号・ステータス・金額を表示。送信ボタンは Stub API（メール送信ログ）。
- ウェルビーイング: Not Good 時のタグ/短文入力（任意）、助けて/相談したいモーダル（上長/人事/産業医/社外窓口など）。個人向け簡易推移グラフ。人事向け匿名集計は 5人以上のみ表示（簡易版は後続でも可）。

## API依存（PoC版）
- Authモック: user/role を取得
- Projects/Tasks: select用
- TimeEntries: create/update/list
- DailyReports/Wellbeing: create/list（人事のみ閲覧）
- Estimates/Invoices: list/detail/send stub
- Alerts: list（ダッシュボード）

## 作業ステップ
- [ ] プロジェクト構成（packages/frontend, lint, format）
- [ ] 認証モック（ヘッダ/クエリで user/role を注入）
- [ ] APIクライアント共通ラッパ（ヘッダにデモユーザ/ロール、エラーハンドリング）
- [ ] ダッシュボード画面 + アラート一覧（モック or API連携）
- [ ] 日報+ウェルビーイング入力フォーム（レスポンシブ、Not Good 時タグ/短文、ヘルプボタン+相談モーダル）
- [ ] 工数入力（日次/週次）フォームと保存/編集/修正時フラグ表示
- [ ] 請求ドラフト一覧/詳細 + 送信Stubボタン
- [ ] 人事向け匿名集計ビュー（5人未満非表示）の骨組み
- [ ] 最低限のE2Eまたは手動手順

## 留意
- UIは最小限のスタイル（後でデザイン拡張）。
- RBACは軽量チェックのみ（ロール/プロジェクト権限は後続で強化）。

## モバイル/ネイティブ対応方針（検討）
- 段階: Web(PWA) → ラッパーアプリ → ネイティブ（React Native/Flutter）
- 認証: OIDC + PKCE、Refresh Token でセッション更新
- オフライン: 日報/工数/経費の下書きは端末に保存（IndexedDB）
- 同期: バックグラウンド同期＋再送キュー、衝突は「新しい更新優先」＋差分レビュー
- Push: 承認待ち/アラート/日報リマインドを通知（APNS/FCM）
- 端末機能: 領収書の撮影アップロード、通知バッジ、簡易生体認証
- 詳細: `docs/requirements/mobile-app.md`
